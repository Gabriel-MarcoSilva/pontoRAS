"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[308],{7308:function(s,e,t){t.r(e),t.d(e,{default:function(){return S}});var i=t(641),r=t(33),a=t(3751);const o={key:0,class:"container",id:"menu"},n={key:1,class:"container",id:"container-admin"},c={style:{width:"100%",display:"flex","align-items":"center","justify-content":"space-around",height:"20%"}},u=["value"],l={id:"infoUser"},h={key:0},m={key:1,class:"container-button"},d={id:"container-history",class:"box"},p={key:0},U={key:1,style:{width:"100%"}},b={style:{display:"grid","grid-template-columns":"repeat(3, 33%)",gap:"1%",width:"100%"}};function v(s,e,t,v,k,y){const g=(0,i.g2)("Alert");return(0,i.uX)(),(0,i.CE)(i.FK,null,[k.isBusca?((0,i.uX)(),(0,i.CE)("section",n,[(0,i.Lk)("a",{onClick:e[2]||(e[2]=s=>k.isBusca=!k.isBusca),class:"setas",style:{"justify-content":"flex-start !important",cursor:"pointer","margin-left":"5px"}},"voltar"),(0,i.Lk)("div",c,[(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>k.select=s),name:"select",id:"select-admin"},[e[8]||(e[8]=(0,i.Lk)("option",{value:"--",disabled:""},"Selecione um usuário",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(k.users,(s=>((0,i.uX)(),(0,i.CE)("option",{key:s,value:s.id},(0,r.v_)(s.nome),9,u)))),128))],512),[[a.u1,k.select]]),(0,i.Lk)("button",{type:"button",onClick:e[4]||(e[4]=s=>y.buscarUser()),class:"btn"},"buscar")]),(0,i.Lk)("div",l,[""!==k.nomeUser?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("p",null,"Nome: "+(0,r.v_)(k.nomeUser),1),(0,i.Lk)("p",null,"Matricula: "+(0,r.v_)(k.matriculaUser),1),(0,i.Lk)("p",null,"Tempo na C11: "+(0,r.v_)(k.tempoUser),1)])):(0,i.Q3)("",!0),""!==k.nomeUser?((0,i.uX)(),(0,i.CE)("div",m,[k.itsAdmin?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:e[5]||(e[5]=(...s)=>y.atribuirAdmin&&y.atribuirAdmin(...s)),class:"btn"}," virar Admin ")):(0,i.Q3)("",!0),k.itsMe?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:e[6]||(e[6]=(...s)=>y.removerUsuario&&y.removerUsuario(...s)),class:"btn"}," Remover "))])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",d,[this.historicoUser?.error?((0,i.uX)(),(0,i.CE)("div",p,(0,r.v_)(this.historicoUser.error),1)):((0,i.uX)(),(0,i.CE)("div",U,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(k.historicoUser,(s=>((0,i.uX)(),(0,i.CE)("div",{class:"history-item",key:s},[(0,i.Lk)("div",b,[(0,i.Lk)("p",null," Data: "+(0,r.v_)(s.data),1),(0,i.Lk)("p",null," Tempo: "+(0,r.v_)(s.horas),1),(0,i.Lk)("p",null," Horário: "+(0,r.v_)(s.horario),1)]),e[9]||(e[9]=(0,i.Lk)("br",null,null,-1)),(0,i.eW)(" Descrição: "+(0,r.v_)(s.descricao),1)])))),128))]))])])):((0,i.uX)(),(0,i.CE)("section",o,[(0,i.Lk)("button",{type:"button",onClick:e[0]||(e[0]=s=>y.newCad())},"Cadastrar novo Membro"),(0,i.Lk)("button",{type:"button",onClick:e[1]||(e[1]=s=>k.isBusca=!k.isBusca)},"buscar Usuário")])),((0,i.uX)(),(0,i.Wv)(g,{message:k.message,size:k.size,onClose:e[7]||(e[7]=s=>this.message=""),key:k.message},null,8,["message","size"]))],64)}t(4114);var k=t(9031),y=t(9753),g={name:"DashboardAdmin",components:{Alert:y.A},data(){return{isOpen:!1,dataUser:[],widthScreen:0,usuarioID:"",historicoUser:[],dataUserSearch:[],tempoUser:"00:00:00",nomeUser:"",matriculaUser:"",itsAdmin:!1,idUserSearch:"",message:"",size:0,select:"--",users:[],membresia:"",itsMe:!1,isBusca:!1}},async mounted(){const s=JSON.parse(localStorage.getItem("dataUser"));this.usuarioID=s.uid,this.membresia=s.membresia??"",this.getUsers()},methods:{closeFormMembreship(){this.byTag("id","formMembreship").style.display="none"},async getUsers(){this.users=await(0,k.CF)()},byTag(s,e){return"id"==s?document.getElementById(e):"name"==s?document.getElementsByName(e)[0]:void 0},newCad(){this.$router.push("/cadastro")},async buscarUser(){if("--"!==this.select){if(this.itsMe=this.select===this.usuarioID,this.dataUserSearch=await(0,k.Cl)(this.select),this.tempoUser=await(0,k.m0)(this.dataUserSearch[0].id),"00:00:00"!==this.tempoUser){this.historicoUser=await(0,k.CK)(this.dataUserSearch[0].matricula);for(let s=0;s<this.historicoUser.length;s++)this.historicoUser[s].data=await this.dateVisual(this.historicoUser[s].data),this.historicoUser[s].horas=await this.formatarTempo(this.historicoUser[s].horas)}else this.historicoUser=[];this.preencheTabela()}},preencheTabela(){this.nomeUser=this.dataUserSearch[0].nome,this.matriculaUser=this.dataUserSearch[0].matricula,this.tempoUser=this.tempoUser?this.formatarTempo(this.tempoUser):"00:00:00",this.itsAdmin="admin"!==this.dataUserSearch[0].role,this.idUserSearch=this.dataUserSearch[0].id},async atribuirAdmin(){if(confirm("Deseja atribuir administrador a este usuário? ")){const s=await(0,k.Bj)(this.idUserSearch);s.status?(this.message="Atribuido com sucesso!! ",this.size=30,this.itsAdmin=!0):(this.message="Não foi possível atribuir",this.size=30)}},dateVisual(s){const e=s.split("T")[0],t=e.split("-")[2],i=e.split("-")[1],r=e.split("-")[0];return t+"/"+i+"/"+r},formatarTempo(s){let e=Math.floor(s/3600),t=Math.floor(s%3600/60),i=s%60;return String(e).padStart(2,"0")+":"+String(t).padStart(2,"0")+":"+String(i).padStart(2,"0")},async removerUsuario(){if(confirm("Deseja remover este usuário?")){const s=await(0,k.a1)(this.select);s?(this.message="Usuário removido com sucesso!",this.size=20,this.getUsers(),this.select="--",this.nomeUser="",this.historicoUser=[]):(this.message="Não foi possível remover o uusário",this.size=30)}}}},C=t(6262);const f=(0,C.A)(g,[["render",v],["__scopeId","data-v-9f798286"]]);var S=f}}]);
//# sourceMappingURL=308.c7324251.js.map
"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[626],{626:function(s,t,i){i.r(t),i.d(t,{default:function(){return B}});var e=i(641),a=i(3751),o=i(33);const r={key:0,class:"container",id:"menu"},n={key:1,class:"container",id:"ontem-na-c11"},c={id:"container-dates"},l={id:"container-pessoas"},u={id:"container-history-ontem",class:"box",style:{width:"100%",padding:"10px"}},h={key:0},d={key:1,style:{width:"100%"}},m={class:"dados"},p={key:2,class:"container",id:"container-admin"},k={style:{width:"100%",display:"flex","align-items":"center","justify-content":"space-around",height:"20%"}},U=["value"],v={id:"infoUser"},b={key:0},y={key:1,class:"container-button"},C={id:"container-history",class:"box"},L={key:0},g={key:1,style:{width:"100%"}},f={style:{display:"grid","grid-template-columns":"repeat(3, 33%)",gap:"1%",width:"100%"}};function w(s,t,i,w,S,E){const I=(0,e.g2)("Alert");return(0,e.uX)(),(0,e.CE)(e.FK,null,[S.isBusca?S.isBusca&&S.hasPeopleinC11?((0,e.uX)(),(0,e.CE)("section",n,[(0,e.Lk)("p",{onClick:t[3]||(t[3]=()=>{S.isBusca=!1,S.hasPeopleinC11=!1}),style:{cursor:"pointer"}}," voltar "),t[16]||(t[16]=(0,e.Lk)("h1",{style:{width:"100%","text-align":"center"}},"Histórico",-1)),(0,e.Lk)("div",c,[(0,e.bo)((0,e.Lk)("input",{type:"date",name:"dataInicio","onUpdate:modelValue":t[4]||(t[4]=s=>S.dataInicio=s),class:"date"},null,512),[[a.Jo,S.dataInicio]]),(0,e.bo)((0,e.Lk)("input",{type:"date",name:"dataFim","onUpdate:modelValue":t[5]||(t[5]=s=>S.dataFim=s),class:"date"},null,512),[[a.Jo,S.dataFim]]),(0,e.Lk)("button",{class:"btn",onClick:t[6]||(t[6]=(...s)=>E.buscaPessoas&&E.buscaPessoas(...s))},"Buscar")]),(0,e.Lk)("div",l,[t[14]||(t[14]=(0,e.Lk)("div",{class:"dados"},[(0,e.Lk)("p",null,"Matrícula"),(0,e.Lk)("p",null,"| Nome"),(0,e.Lk)("p",null,"Tempo"),(0,e.Lk)("p",null,"| Saiu")],-1)),t[15]||(t[15]=(0,e.Lk)("hr",null,null,-1)),(0,e.Lk)("div",u,[this.historico?.error?((0,e.uX)(),(0,e.CE)("div",h,(0,o.v_)(this.historico.error),1)):((0,e.uX)(),(0,e.CE)("div",d,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(S.historico,(s=>((0,e.uX)(),(0,e.CE)("div",{class:"history-item",key:s},[(0,e.Lk)("div",m,[(0,e.Lk)("p",null,(0,o.v_)(s.matricula),1),(0,e.Lk)("p",null," | "+(0,o.v_)(s.nome),1),(0,e.Lk)("p",null,(0,o.v_)(s.horas),1),(0,e.Lk)("p",null," | "+(0,o.v_)(s.horario),1)]),t[13]||(t[13]=(0,e.Lk)("br",null,null,-1)),(0,e.eW)(" Descrição: "+(0,o.v_)(s.descricao),1)])))),128))]))])])])):((0,e.uX)(),(0,e.CE)("section",p,[(0,e.Lk)("a",{onClick:t[7]||(t[7]=()=>{S.isBusca=!S.isBusca}),class:"setas",style:{"justify-content":"flex-start !important",cursor:"pointer","margin-left":"5px"}},"voltar"),(0,e.Lk)("div",k,[(0,e.bo)((0,e.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>S.select=s),name:"select",id:"select-admin"},[t[17]||(t[17]=(0,e.Lk)("option",{value:"--",disabled:""},"Selecione um usuário",-1)),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(S.users,(s=>((0,e.uX)(),(0,e.CE)("option",{key:s,value:s.id},(0,o.v_)(s.nome),9,U)))),128))],512),[[a.u1,S.select]]),(0,e.Lk)("button",{type:"button",onClick:t[9]||(t[9]=s=>E.buscarUser()),class:"btn"},"buscar")]),(0,e.Lk)("div",v,[""!==S.nomeUser?((0,e.uX)(),(0,e.CE)("div",b,[(0,e.Lk)("p",null,"Nome: "+(0,o.v_)(S.nomeUser),1),(0,e.Lk)("p",null,"Matricula: "+(0,o.v_)(S.matriculaUser),1),(0,e.Lk)("p",null,"Tempo na C11: "+(0,o.v_)(S.tempoUser),1)])):(0,e.Q3)("",!0),""!==S.nomeUser?((0,e.uX)(),(0,e.CE)("div",y,[S.itsAdmin?((0,e.uX)(),(0,e.CE)("button",{key:0,onClick:t[10]||(t[10]=(...s)=>E.atribuirAdmin&&E.atribuirAdmin(...s)),class:"btn"}," virar Admin ")):(0,e.Q3)("",!0),S.itsMe?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("button",{key:1,onClick:t[11]||(t[11]=(...s)=>E.removerUsuario&&E.removerUsuario(...s)),class:"btn"}," Remover "))])):(0,e.Q3)("",!0)]),(0,e.Lk)("div",C,[this.historicoUser?.error?((0,e.uX)(),(0,e.CE)("div",L,(0,o.v_)(this.historicoUser.error),1)):((0,e.uX)(),(0,e.CE)("div",g,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(S.historicoUser,(s=>((0,e.uX)(),(0,e.CE)("div",{class:"history-item",key:s},[(0,e.Lk)("div",f,[(0,e.Lk)("p",null," Data: "+(0,o.v_)(s.data),1),(0,e.Lk)("p",null," Tempo: "+(0,o.v_)(s.horas),1),(0,e.Lk)("p",null," Horário: "+(0,o.v_)(s.horario),1)]),t[18]||(t[18]=(0,e.Lk)("br",null,null,-1)),(0,e.eW)(" Descrição: "+(0,o.v_)(s.descricao),1)])))),128))]))])])):((0,e.uX)(),(0,e.CE)("section",r,[(0,e.Lk)("button",{type:"button",onClick:t[0]||(t[0]=s=>E.newCad())},"Cadastrar novo Membro"),(0,e.Lk)("button",{type:"button",onClick:t[1]||(t[1]=s=>S.isBusca=!S.isBusca)},"Buscar Usuário"),(0,e.Lk)("button",{type:"button",onClick:t[2]||(t[2]=()=>{S.isBusca=!S.isBusca,S.hasPeopleinC11=!0,E.buscaPessoas()})},"Histórico")])),((0,e.uX)(),(0,e.Wv)(I,{message:S.message,size:S.size,onClose:t[12]||(t[12]=s=>this.message=""),key:S.message},null,8,["message","size"]))],64)}i(4114);var S=i(9031),E=i(9753),I={name:"DashboardAdmin",components:{Alert:E.A},emits:["openMenu"],data(){return{isOpen:!1,dataUser:[],widthScreen:0,usuarioID:"",historico:[],historicoUser:[],dataUserSearch:[],tempoUser:"00:00:00",nomeUser:"",matriculaUser:"",itsAdmin:!1,idUserSearch:"",message:"",size:0,select:"--",users:[],membresia:"",itsMe:!1,isBusca:!1,hasPeopleinC11:!1,dataInicio:null,dataFim:null}},async mounted(){const s=JSON.parse(localStorage.getItem("dataUser"));this.usuarioID=s.uid,this.membresia=s.membresia??"",this.getUsers(),this.$emit("openMenu")},methods:{closeFormMembreship(){this.byTag("id","formMembreship").style.display="none"},async getUsers(){this.users=await(0,S.CF)()},byTag(s,t){return"id"==s?document.getElementById(t):"name"==s?document.getElementsByName(t)[0]:void 0},newCad(){this.$router.push("/cadastro")},async buscarUser(){if("--"!==this.select){if(this.itsMe=this.select===this.usuarioID,this.dataUserSearch=await(0,S.Cl)(this.select),this.tempoUser=await(0,S.m0)(this.dataUserSearch[0].id,"",""),"00:00:00"!==this.tempoUser){this.historicoUser=await(0,S.CK)(this.dataUserSearch[0].matricula);for(let s=0;s<this.historicoUser.length;s++)this.historicoUser[s].data=await this.dateVisual(this.historicoUser[s].data),this.historicoUser[s].horas=await this.formatarTempo(this.historicoUser[s].horas)}else this.historicoUser=[];this.preencheTabela()}},async buscaPessoas(){const s=new Date;this.historico=[],this.dataInicio||this.dataFim||(this.dataInicio=this.altDateToInput(s.toLocaleDateString()),this.dataFim=this.dataInicio),this.historico=await(0,S.Ui)(this.dataInicio,this.dataFim);for(let t=0;t<this.historico.length;t++){this.historico[t].horas=await this.formatarTempo(this.historico[t].horas);const s=await(0,S.Cl)(this.historico[t].usuarioId);this.historico[t].nome=s[0].nome,this.historico[t].matricula=s[0].matricula}},altDateToInput(s){const t=s.split("/")[0],i=s.split("/")[1],e=s.split("/")[2];return`${e}-${i}-${t}`},preencheTabela(){this.nomeUser=this.dataUserSearch[0].nome,this.matriculaUser=this.dataUserSearch[0].matricula,this.tempoUser=this.tempoUser?this.formatarTempo(this.tempoUser):"00:00:00",this.itsAdmin="admin"!==this.dataUserSearch[0].role,this.idUserSearch=this.dataUserSearch[0].id},async atribuirAdmin(){if(confirm("Deseja atribuir administrador a este usuário? ")){const s=await(0,S.Bj)(this.idUserSearch);s.status?(this.message="Atribuido com sucesso!! ",this.size=30,this.itsAdmin=!0):(this.message="Não foi possível atribuir",this.size=30)}},dateVisual(s){const t=s.split("T")[0],i=t.split("-")[2],e=t.split("-")[1],a=t.split("-")[0];return i+"/"+e+"/"+a},formatarTempo(s){let t=Math.floor(s/3600),i=Math.floor(s%3600/60),e=s%60;return String(t).padStart(2,"0")+":"+String(i).padStart(2,"0")+":"+String(e).padStart(2,"0")},async removerUsuario(){if(confirm("Deseja remover este usuário?")){const s=await(0,S.a1)(this.select);s?(this.message="Usuário removido com sucesso!",this.size=20,this.getUsers(),this.select="--",this.nomeUser="",this.historicoUser=[]):(this.message="Não foi possível remover o uusário",this.size=30)}}}},X=i(6262);const _=(0,X.A)(I,[["render",w],["__scopeId","data-v-1ddb306b"]]);var B=_}}]);
//# sourceMappingURL=626.762f6cdd.js.map